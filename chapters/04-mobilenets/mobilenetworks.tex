%!TEX root = ../../dissertation.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Mobile Core Network Investigation}
\label{chap:mobilenets}

The rise of reliable video streaming is not happening completely independent of other developments in computer networking. Internet access is shifting towards mobile smartphones and mobile networks, sometimes even completely replacing fixed dial-up access  with stationary mobile \gls{3G} and \gls{LTE} modems. And all the ``over-the-top'' media streaming services are now more and more being used within mobile networks bringing a new set of traffic patterns as well as possible issues and influence factors along with them.

Today's cellular mobile networks are usually based on \gls{3GPP} specifications which have evolved from the circuit switched \gls{GSM} network into the fully packet switched \gls{LTE} which is still in its unrolling phase. But simply being packet switched does not mean that it shares a lot of similarity with a typical wireline \gls{IP} stack and network access infrastructure, for example a \gls{VDSL} or \gls{DOCSIS} dial-up connected to an \gls{IP} network. 

A \gls{3G} network (a term synonymous for the typical combined \gls{GSM} and \gls{UMTS} cellular network in use today) is very distinct from typical wired networks as it provides, amongst others, mobility and authentication in its lower layers through the core specifications rather than being optional on-top services as is typically the case in the Internet. To achieve this, large amounts of state have to be kept at each network node and is explicitly communicated among the network nodes in its \gls{CN}. Also, the lines separating layers and functions are very blurred, making it very hard to grasp parts of the architecture without understanding the whole. Many specialized protocols are involved to communicate intents and states in the network. This causes processing overhead and signaling traffic on the network paths on top of the actually useful user traffic. 

It is a known fact, that radio spectral resources are a scarce resource that need to be well managed. But it might not seem immediately obvious to think the same about control plane resources in the infrastructure of a mobile network. Yet, there have been accounts\footnote{``Docomo Counts Cost of Signaling Storm'',\url{http://www.lightreading.com/d/d-id/693779}}\footnote{``Android Signaling Storm Rises in Japan'', \url{http://www.lightreading.com/a/d-id/693138}}\footnote{``Angry Birds + Android + ads = network overload'', \url{http://www.itwire.com/business-it-news/47823}} (\cite{huawei2011storm}) of situations where the core network has been flooded with signaling, despite only a negligible amount of actual user traffic being transported. This resulted in an event dubbed ``signaling storm'', causing an unintentional \gls{DDoS} attack, disrupting user-plane connectivity on its way.

The state of research on the architecture and especially the control plane behavior of \gls{3G} mobile cellular networks is lean in comparison to the huge volume of research conducted other wired Internet structures. Most of the available research focuses on user-oriented metrics such as traffic statistics and mobility patterns, or only investigates properties of the radio interface. Little has been published about activity within the core network, and yet less about core signaling. 

Conducting \gls{IP} traffic research at the network's edge, independent of the access technology, is usually relatively easy. Writing simple tests and measurement scripts, that record the user's traffic, is all that is needed. But mobile phones do not allow one to peek inside its layer 1 and 2 implementation and interaction, where the control plane resides. Any information on this black box can only be indirectly inferred from layers above --- by forcing behavior known from specification --- or below --- through spectrum analysis using \gls{SDR} approaches. 

However, to directly investigate the core as well as the control plane, some kind of a measurement infrastructure inside the network is needed. With this, researchers could not just look into user traffic flowing through the network but also investigate the signaling heavy mobile network control plane. But to gain this kind of access to the network  would require the cooperation of a mobile network operator, which they grant very reluctantly due to privacy and competitive concerns.

Another important aspect related to signaling is network dimensioning. Operators mostly dimension their networks in accordance to the expected user traffic. But in such a signaling-dependent architecture this might not be the most fitting approach, as the mentioned signaling storms seem to demonstrate. 

This chapter attempts to remedy parts of the problem. Data from an existing mobile network measurement infrastructure is used to evaluate aspects of the control plane. 

Section~\ref{c4:sec:3gpparchitecture} discusses the required details of the mobile network architecture under investigation followed by a survey of existing literature in Section~\ref{c4:sec:relwork}. Next, an attempt on defining and inferring control plane load is made in Section~\ref{c4:sec:loaddefinition}. This is used to find viable targets for a potential load evaluation. 

Further methodology is given in Section~\ref{c4:sec:methodology} with the actual evaluation including a statistical analysis to follow in Section~\ref{c4:sec:evaluations}. The measurement data backs up a number of assumptions on the behavior of different device and operating system types, but also reveals some remarkable differences in signaling characteristics. Afterwards, the evaluation results are used to construct load models for the current \gls{CN} in Section~\ref{c4:sec:modeling}. This is extended with possible modifications to it and a numerical simulation to confirm the model viability.

This chapter uses material previously published in \cite{metzger2012research}, \cite{metzger2014jcnc}, and \cite{metzger2014lossmodel} and extends it.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{architecture.tex}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{relwork.tex}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{loaddef.tex}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{methodology.tex}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{stat.tex}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{evaluations.tex}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{modeling.tex}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{simulation.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Core Network Summary}
\label{c4:sec:conclusion}

This chapter gave a broad overview of the \gls{3G} mobile core network control plane and attempts to determine a fitting definition for control plane load. This can not be achieved without first understanding many of the aspects and protocols unique to mobile networks. And these differ a lot from the conventional wisdom found in wired network architectures. With this knowledge at hand, a week long measurement trace acquired in the core network of an Austrian mobile operator was investigated. 

The definition of a control plane load serves as an essential distinction to regular mobile network investigations, which usually consider just the user plane. Concluding from the trace, the investigation of \gls{gtp} tunnel properties was determined to be a worthwhile measure for control plane load at the \gls{GGSN}, one of the central nodes in a \gls{3G} core network.

The investigation also showed, that the control plane is easily influenced by several device-based --- as far as they can be distinguished in a core network trace --- and time-of-day related features. The overall diurnal tunnel signaling load closely resembles the progression of the user plane. Most of the control plane's procedures are still triggered, either directly or indirectly, by user devices, of which the offered load is much smaller during night time. The trace evaluation also confirms the dominating influence of smartphones compared to other devices types, even when looking at the control plane.

But this also means, that sheer traffic volume is not a good measure to determine load, as the per-device traffic volume of a smartphone is rather low when compared to devices like pure \gls{3G} modems attached to a notebook. In this aspect, the findings also support the stories of signaling storms in mobile networks caused by applications regularly causing small amounts of network traffic. Each application interaction results in disproportionate amounts of signaling load being generated. Even worse, measures taken to improve the radio interface control plane such as Fast Dormancy could possibly have adverse effects to core signaling as they might increase the tunnel churn.

But the load investigation should not stop here. The presented approaches were just the ones that could be conducted with the available data. If one were to have access to a mobile network monitoring system or more detailed data records from such a system, it would open up many more angles in the investigation. For example, recording every individual signaling message with all \glspl{IE} would give hard numbers on the direct signaling overhead, as could measurement probes located inside the network nodes report on the CPU and memory load in order to determine the control plane's processing overhead. A closer investigation of control plane load in relation to mobility behavior should also prove very interesting, as this is one of the central motifs in every mobile network.

Learning from this historical data, queuing theoretic models were created that can describe the control plane load in such networks. These models can be easily used in network dimensioning and planning processes by means of, e.g., stationary analyses. The novel baseline control plane load model presented here is a $M(t)/G(t)/c/0$ non-stationary Erlang loss model. When used in conjunction with parameters derived from the measurement traces it can easily be used for network dimensioning. To improve scaling in the future a further \gls{GGSN} load model with features used in virtualization was also proposed.

Due to general solvability issues of non-stationary Erlang models the model is evaluated and validated using a queuing simulation in terms of their blocking and tunnel state probability as well as the general resource utilization. The virtual model provided the added benefit of being more flexible in its scaling properties and energy efficiency. This might even lead to new \gls{GGSN}-as-a-Service business models, removing the need to provide and operate large amounts of infrastructure for rare cases of peak load. 

%In the future we would like to deepen our modeling efforts to provide more dimensioning options for a core network. Also, we want to further investigate the correlation of user traffic and signaling and take a look at the implications specific traffic types bring for the core network. 

%All these investigations and modeling efforts combined could lead to a more informed approach of network planning: Being more aware of the control plane provides the necessary tools to identify probable causes for control plane activity. 

%We would also like to expand our evaluations, as there are several angles not investigated so far that could prove worthwhile. This includes an examination of the exact number and size of signaling messages flowing through the core, a more detailed picture of the processing load these messages induce at the \gls{GGSN}, and an evolved model. Furthermore, a differential analysis of our data compared to a newer dataset (potentially including \gls{LTE} access) could really prove worthwhile.

%We also look forward to searching for multiple active tunnels per device. As discussed previously, the \textit{Secondary PDP Context Activation Procedure} enables devices to establish up to ten additional tunnels attributed with a different, higher QoS level, if the network supports this. The additional load of managing and holding multiple tunnels plus the displacement of other, ``lower-quality'' traffic could prove to be an interesting investigation. Initial observations indicate that this feature is rarely used today by very few types of devices, but it will be of increased interest in the face of ongoing LTE/EPS deployments, whose specifications expand upon this secondary tunnel concept.