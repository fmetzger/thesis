%%!TEX program = lualatex

\documentclass{beamer}

\usefonttheme{professionalfonts}
\usepackage{fontspec}
\usepackage{mathtools}
\usepackage{lualatex-math} % fixes amsmath/mathtools ... for luatex
\usepackage{unicode-math} % fixes math
%\setmathfont{Asana-Math.otf}
\setmathfont{Latin Modern Math}
\usepackage{polyglossia} % babel replacement for use with fontspec
\setdefaultlanguage{english}

\usepackage{tikz}
\usetikzlibrary{arrows}
\definecolor{grey}{RGB}{153, 153, 153}
\definecolor{orange}{RGB}{230, 159, 0}
\definecolor{skyblue}{RGB}{86, 180, 233}
\definecolor{bluishgreen}{RGB}{0, 158, 115}
\definecolor{yellow}{RGB}{240, 228, 66}
\definecolor{blue}{RGB}{0, 114, 178}
\definecolor{vermillion}{RGB}{213, 94, 0}
\definecolor{reddishpurple}{RGB}{204, 121, 167}
\usepackage{amsmath,amssymb}

\usecolortheme{seagull}
\usetheme{CambridgeUS}
\useinnertheme{rectangles}


\title[GGSN Models]{Measurements and Models of a 3G Network's GGSN}
%\subtitle{Evidence from India}
\author{Florian Metzger}
\institute[Unversity of Vienna]
{
	University of Vienna\\
  	Faculty of Computer Science

}
\date[Forschungsseminar WS13/14]{DOC Forschungsseminar\\ 2013/11/13}

%\subject{Informatik}

\begin{document}


\frame{\titlepage}

\begin{frame}
	\frametitle{Outline}
	\tableofcontents
\end{frame}

%%%
\section{Introduction}
%%%

\begin{frame}
	\frametitle{Relation to Thesis}

	Thesis will consist of 2.5 parts:
	\begin{enumerate}
		\item Investigation of TCP-based video streaming techniques
			\begin{itemize}
				\item Protocol survey and classification
				\item Deriving a model
				\item Measurements with the model
			\end{itemize}
		\item Evaluation of a 3G core network
			\begin{itemize}
				\item Investigation and evaluation of the control plane
				\item \textbf{Modeling and simulating load}
			\end{itemize}
		\item Measuring video streaming in a 3G network 
	\end{enumerate}

	Presentation based on MMB'14 submission \textit{``A PDP Context Load Model and Virtualization
Gain for a Mobile Network's GGSN''}

	% \begin{block}{}
	% 	This presentation
	% \end{block}
\end{frame}

\begin{frame}
    \frametitle{Motivation}



	Mobile network planning and dimensioning today
    \begin{itemize}
    	\item solely based on expected user traffic
		\item good algorithms and tools for placing radio towers and planning radio propagation
		\item core network and control plane usually not given much consideration
	\end{itemize}

	Our approach
	\begin{itemize}
		\item presents models for a GGSN in the core network
		\item models fed with data from a real network
		\item simulates the model
	\end{itemize}

\end{frame}


\begin{frame}
    \frametitle{GTP Tunnels}

      \begin{center}
		\includegraphics[height=3cm]{figures/umts-network.pdf}
	\end{center}

	% \begin{center}
	% 	\includegraphics[height=2.5cm]{figures/mm-state-model.pdf}
 % 	\end{center}

	Tunneling concept
    \begin{itemize}
		\item Any user traffic in a 3G net is encapsulated into tunnels
		\item GTP protocol between SGSN and GGSN
		\item Tunnel state (PDP Context) held at nodes
		\item Tunnels created, deleted, and updated based in reaction to user
		\item GGSN involved in all GTP signaling
	\end{itemize}
\end{frame}


%%%
\section{Dataset \& Evaluations}
%%%

\begin{frame}
	\frametitle{The Dataset}

	\begin{itemize}
		\item Passive measurements in the core network of a operator (METAWIN)
		\item One week long, anonymized (April 2011)
		\item 2.2Bn user traffic records, 410M GTP tunnel management messages
		\item Specific properties make distribution modeling hard 
	\end{itemize}

	Evaluated properties important for the model
	\begin{itemize}
		\item arrival rate of new tunnels
		\item duration of tunnels
		\item and diurnal influences on them
	\end{itemize}

\end{frame}

\begin{frame}
	\frametitle{Arrival Process}
		\framesubtitle{Interarrival Time of Successful Tunnel Requests}
	\begin{columns}[c]
		\begin{column}{7cm}
				\includegraphics[width=7cm]{figures/R-IAT-fromflows-ecdfs-2h.pdf}
		\end{column}
		\begin{column}{7cm}
			\includegraphics[width=7cm]{figures/create_freq.pdf}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}
	\frametitle{Tunnel Durations}
	\begin{center}
		\includegraphics[height=7.5cm]{figures/R-duration-activetunnels-timeofday-ecdf.pdf}
	\end{center}
\end{frame}

%%%
\section{Models}
%%%

\begin{frame}
	\frametitle{Queuing Models}

	\begin{center}
		\includegraphics[height=2cm]{figures/kendall-model.pdf}
	\end{center}

	Described by Kendall's Notation $A/S/c/q$
	\begin{itemize}
	\item Distribution of the arrival process $A$
		% \begin{itemize}
		% 	\item Poisson arrivals, memoryless
		% 	\item Markov chain model
		% \end{itemize}
	\item Distribution of the serving time $S$
	\item Number of Servers $c$
	\item Queue Length $q$
	\begin{itemize}
		\item $q=\infty$ no loss will occur
		\item $0$ loss/blocking system, no queue
	\end{itemize}
	\item Evaluate
		\begin{itemize}
			\item Average queue length and server occupation
			\item Blocking probability
		\end{itemize}
	\end{itemize}
\end{frame}


\begin{frame}
	\frametitle{Traditional GGSN Model}
		\begin{center}
		\resizebox{!}{3cm}{%
			\input{figures/model_traditional_ggsn.tex}
		}
		\end{center}

		\begin{itemize}
			\item Poisson tunnel arrival process with rate $\lambda(t)$, adjusted for the time of day
			\item GGSN server can serve $n$ tunnels in parallel (limited by state / processing overhead)
			\item each with a serving time (tunnel duration) of $\mu(t)$
			\item If server is full, reject new tunnel requests
			\item Non-stationary Erlang loss model $M_t/G/n/0$ with blocking probability $p_b$
		\end{itemize}

\end{frame}

\begin{frame}
	\frametitle{Virtualized GGSN Model}
		\begin{center}
		\resizebox{!}{3cm}{%
			\input{figures/model_nfv_ggsn.tex}
		}
		\end{center}

		\begin{itemize}
			\item Same arrival and serving time process, no queue
			\item Hypervisor distributes tunnels and starts virtualized GGSN instances on demand
			\item Up to $s_{max}$ instances with capacity of $m$ each
			\item Instance count kept near actual system load (energy efficiency)
			\item Additional blocking, when new instances are not switched on fast enough
		\end{itemize}
\end{frame}


%%%
\section{Queuing Simulation}
%%%


\begin{frame}
	\frametitle{Simulating the Model}

	\begin{itemize}
		\item $M_t/G/n/0$ model, no exact mathematical solution available
		\item Use queuing simulation instead of stationary analysis
		\item SimPy3 based discrete event simulation\footnote{\url{https://github.com/fmetzger/ggsn-simulation}}
		\item Arrival process with normalized exponential distributions fitted to dataset, four time of day slots
		\item Tunnel durations fitted with rational functions
		%\item Simple hypervisor instance start logic: always keep at least one active free instance in reserve
		\item Scenario variables: $n$ and $s_max$
		\item Evaluate and compare both models based on
		\begin{itemize}
			\item Blocking probability
			\item resource and instance usage
		\end{itemize}
	\end{itemize}

\end{frame}

\begin{frame}
	\frametitle{Blocking Probability}

	\begin{center}
		\includegraphics[height=6cm]{figures/virtual-blocking.pdf}
	\end{center}

	\begin{itemize}
		\item Traditional and virtualized scale equally with supported tunnels
	\end{itemize}
\end{frame}




\begin{frame}
	\frametitle{Virtualized GGSN Resource Usage}

	\begin{center}
		\includegraphics[height=6cm]{figures/instanceuse-multiserver-real.pdf}
	\end{center}

	\begin{itemize}
		\item System scales both up (tunnels/instance) and out (instances)
	\end{itemize}
\end{frame}




%%%
\section{Conclusion}
%%%

\begin{frame}
	\frametitle{Conclusion}

	\begin{itemize}
		\item Investigated dataset for tunnel properties

		\begin{itemize}
			\item Non-stationary poisson-arrivals
			\item Tunnel duration with general distribution fitted to a rational function
		\end{itemize}

		\item Two novel models for tunnel load at a mobile core network's GGSN
		\begin{itemize}
			\item Traditional GGSN representing today's makeup
			\item Virtualized GGSN proposal with improved scalability and efficiency
		\end{itemize}

		\item Simulative evaluation of the model

		\item Enable mobile network dimensioning based on tunnel blocking rate instead of only user traffic volume


	\end{itemize}

\end{frame}

\section*{}

\begin{frame}
	\frametitle{Thanks!}

	\centering
		\Large Questions?
\end{frame}


\begin{frame}
\end{frame}


\begin{frame}
	\frametitle{}
	\begin{center}
		\includegraphics[height=7cm]{figures/compare-maxinstances-block.pdf}
	\end{center}
\end{frame}


\begin{frame}
	\frametitle{Exponential Arrival Process Fits}

	\begin{center}
		\includegraphics[height=7.5cm]{figures/timeslot-fits.pdf}
	\end{center}
\end{frame}

\begin{frame}
	\frametitle{Serving Time Rational Functions Fit}

	\begin{center}
		\includegraphics[height=7.5cm]{figures/R-IAT-active-fit-cdf-facets.pdf}
	\end{center}
\end{frame}

\begin{frame}
	\frametitle{Scaling Up or Out with a Virtualized GGSN}
	
	\begin{center}
		\includegraphics[height=7cm]{figures/resourceusedistribution-detail-barplot-annotated.pdf}
	\end{center}
\end{frame}

\end{document}


% \begin{frame}
% 	\frametitle{Fitting Distributions to the Data}
% 	\begin{itemize}
% 		\item Data preparation with mysql \& python
% 		\begin{itemize}
% 			\item Fetch CREATE and DELETE from db
% 			\item Calculate tunnel IAT and durations
% 		\end{itemize}
% 		\item Statistical analysis and fitting using R/fitdistrplus/MASS
% 		\begin{itemize}
% 			\item $1\%$ random sampling of the data
% 			\item Distribution parameter estimation by closed formula matching of theoretical and observed means and variances (Method of Moments Estimation)
% 			\item Testing goodness of the fit
% 				\begin{itemize}
% 					\item Pearson's $\chi^2$-test
% 					\item Kolmogorov-Smirnov $d = \max|F_n(x)-F(x)|$
% 					\item Visually
% 					\item ANOVA
% 				\end{itemize}
% 		\end{itemize}
% 	\end{itemize}
% \end{frame}


